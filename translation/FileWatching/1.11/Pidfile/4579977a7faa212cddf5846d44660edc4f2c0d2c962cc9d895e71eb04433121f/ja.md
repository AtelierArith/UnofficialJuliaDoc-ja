```
mkpidlock([f::Function], at::String, [pid::Cint]; kwopts...)
mkpidlock(at::String, proc::Process; kwopts...)
```

現在のプロセスまたはpidまたはprocで識別されるプロセスのために、パス「at」のためのpidfileロックを作成します。ロックされた後に実行する関数を受け取ることができ、`do`ブロックでの使用に適しており、その後ロックは自動的に閉じられます。ロックに失敗し、`wait`がfalseの場合、エラーがスローされます。

ロックは、`close`、`finalizer`、または`proc`が終了した後すぐに解放されます。戻り値がプログラムのクリティカルセクションの終わりまで生きていることを確認してください。そうしないと、`finalizer`が早期にそれを回収してしまいます。

オプションのキーワード引数：

  * `mode`: ファイルアクセスモード（プロセスのumaskによって修正されます）。デフォルトは世界中から読み取り可能です。
  * `poll_interval`: 試行の間の最大時間を指定します（`watch_file`が機能しない場合）。
  * `stale_age`: 既存のpidfileを削除します（ロックを無視して）、そのmtimeに基づいてこの秒数より古い場合。ファイルは、ファイル内のpidが有効である可能性がある場合、これより5倍長くなるまで削除されません。また、`refresh`が0にオーバーライドされてロックの更新が無効にされている場合は、25倍長くなります。デフォルトではこれは無効になっています（`stale_age` = 0）、しかし、一般的に推奨される値は、推定される通常の完了時間の約3-5倍です。
  * `refresh`: 経過した時間の各間隔ごとにmtimeを更新することによって、ロックが古くなるのを防ぎます。デフォルトでは、これは`stale_age/2`に設定されており、推奨される値です。
  * `wait`: trueの場合、ロックを取得するまでブロックし、falseの場合、ロックが失敗した場合はエラーを発生させます。
