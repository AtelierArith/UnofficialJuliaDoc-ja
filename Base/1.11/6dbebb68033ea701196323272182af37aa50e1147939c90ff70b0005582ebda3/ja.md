```
lock(f::Function, lock)
```

`lock`を取得し、`lock`を保持した状態で`f`を実行し、`f`が返るときに`lock`を解放します。ロックが別のタスク/スレッドによってすでにロックされている場合は、それが利用可能になるまで待機します。

この関数が返るとき、`lock`は解放されているため、呼び出し元はそれを`unlock`しようとしないでください。

参照: [`@lock`](@ref).

!!! compat "Julia 1.7"
    第二引数として[`Channel`](@ref)を使用するには、Julia 1.7以降が必要です。

